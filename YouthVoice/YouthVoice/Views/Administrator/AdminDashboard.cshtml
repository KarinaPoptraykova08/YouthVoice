@{
    ViewData["Title"] = "Dashboard";
}
@model int

<br />
<main>
    <div class="admin-layout">
        <!-- Sidebar -->
        <partial name="Shared/_AdminLayout"/>

        <!-- Main Content -->
        <div class="admin-main">
            <!-- Content -->
            <div class="admin-content">
                <div class="container-fluid">
                    <!-- Stats Cards -->
                    <div class="row align-content-center gap-5">
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-0 shadow h-100">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-uppercase mb-1">Общ брой потребители</div>
                                            <div class="h5 mb-0 font-weight-bold">@Model</div>
                                        </div>
                                        <div class="col-auto">
                                            <div class="stat-icon bg-primary text-white">
                                                <i class="fa fa-users"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-0 shadow h-100">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-uppercase mb-1">Организации</div>
                                            <div class="h5 mb-0 font-weight-bold">брой организации...</div>
                                        </div>
                                        <div class="col-auto">
                                            <div class="stat-icon bg-success text-white">
                                                <i class="fa fa-building"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card border-0 shadow h-100">
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col mr-2">
                                            <div class="text-xs font-weight-bold text-uppercase mb-1">Събития</div>
                                            <div class="h5 mb-0 font-weight-bold">брой събития...</div>
                                        </div>
                                        <div class="col-auto">
                                            <div class="stat-icon bg-info text-white">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity and User Registration -->
                    <div class="row">
                        <!-- Recent Activity -->
                        <div class="col-lg-8 mb-4">
                            <div class="card border-0 shadow">
                                <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
                                    <h6 class="m-0 font-weight-bold">Recent Activity</h6>
                                    <div class="dropdown">
                                        <button class="btn btn-sm btn-link" type="button" id="activityDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="fa fa-ellipsis-v"></i>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="activityDropdown">
                                            <li><a class="dropdown-item" href="#">View All</a></li>
                                            <li><a class="dropdown-item" href="#">Export Data</a></li>
                                            <li><a class="dropdown-item" href="#">Settings</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="activity-timeline">
                                        <div class="activity-item">
                                            <div class="activity-icon bg-primary">
                                                <i class="fa fa-user-plus"></i>
                                            </div>
                                            <div class="activity-content">
                                                <div class="activity-title">New User Registration</div>
                                                <div class="activity-text">John Doe registered a new account</div>
                                                <div class="activity-time">5 minutes ago</div>
                                            </div>
                                        </div>
                                        <div class="activity-item">
                                            <div class="activity-icon bg-success">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <div class="activity-content">
                                                <div class="activity-title">New Event Created</div>
                                                <div class="activity-text">Youth Leadership Conference was created by Tech Youth Network</div>
                                                <div class="activity-time">1 hour ago</div>
                                            </div>
                                        </div>
                                        <div class="activity-item">
                                            <div class="activity-icon bg-info">
                                                <i class="fa fa-building"></i>
                                            </div>
                                            <div class="activity-content">
                                                <div class="activity-title">Organization Updated</div>
                                                <div class="activity-text">Green Youth Movement updated their profile information</div>
                                                <div class="activity-time">3 hours ago</div>
                                            </div>
                                        </div>
                                        <div class="activity-item">
                                            <div class="activity-icon bg-warning">
                                                <i class="fa fa-comment"></i>
                                            </div>
                                            <div class="activity-content">
                                                <div class="activity-title">New Feedback</div>
                                                <div class="activity-text">Received feedback from Sarah Johnson about the platform</div>
                                                <div class="activity-time">Yesterday</div>
                                            </div>
                                        </div>
                                        <div class="activity-item">
                                            <div class="activity-icon bg-danger">
                                                <i class="fa fa-exclamation-triangle"></i>
                                            </div>
                                            <div class="activity-content">
                                                <div class="activity-title">Report Submitted</div>
                                                <div class="activity-text">A user reported inappropriate content in an event description</div>
                                                <div class="activity-time">Yesterday</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer bg-white text-center">
                                    <a href="#" class="text-decoration-none">View All Activity</a>
                                </div>
                            </div>
                        </div>

                        <!-- User Registration Chart -->
                        <div class="col-lg-4 mb-4">
                            <div class="card border-0 shadow h-100">
                                <div class="card-header bg-white py-3">
                                    <h6 class="m-0 font-weight-bold">User Registration</h6>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="userRegistrationChart"></canvas>
                                    </div>
                                </div>
                                <div class="card-footer bg-white">
                                    <div class="row text-center">
                                        <div class="col-4">
                                            <div class="h5 mb-0">68</div>
                                            <div class="small text-muted">This Week</div>
                                        </div>
                                        <div class="col-4">
                                            <div class="h5 mb-0">215</div>
                                            <div class="small text-muted">This Month</div>
                                        </div>
                                        <div class="col-4">
                                            <div class="h5 mb-0">1,250</div>
                                            <div class="small text-muted">Total</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Users Table -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card border-0 shadow mb-4">
                                <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center">
                                    <h6 class="m-0 font-weight-bold">Recent Users</h6>
                                    <a href="admin-users.html" class="btn btn-sm btn-primary">View All Users</a>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Email</th>
                                                    <th>Role</th>
                                                    <th>Status</th>
                                                    <th>Joined</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <img src="https://source.unsplash.com/random/40x40/?portrait" class="rounded-circle me-2" width="40" height="40" alt="User">
                                                            <div>
                                                                <div class="fw-bold">John Doe</div>
                                                                <div class="small text-muted">johndoe</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>john.doe@example.com</td>
                                                    <td><span class="badge bg-primary">Admin</span></td>
                                                    <td><span class="badge bg-success">Active</span></td>
                                                    <td>Jun 15, 2023</td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm btn-link" type="button" data-bs-toggle="dropdown">
                                                                <i class="fa fa-ellipsis-v"></i>
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-menu-end">
                                                                <li><a class="dropdown-item" href="#"><i class="fa fa-eye me-2"></i>View</a></li>
                                                                <li><a class="dropdown-item" href="#"><i class="fa fa-edit me-2"></i>Edit</a></li>
                                                                <li><a class="dropdown-item text-danger" href="#"><i class="fa fa-ban me-2"></i>Suspend</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <img src="https://source.unsplash.com/random/40x40/?woman" class="rounded-circle me-2" width="40" height="40" alt="User">
                                                            <div>
                                                                <div class="fw-bold">Jane Smith</div>
                                                                <div class="small text-muted">janesmith</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>jane.smith@example.com</td>
                                                    <td><span class="badge bg-info">Moderator</span></td>
                                                    <td><span class="badge bg-success">Active</span></td>
                                                    <td>Jun 12, 2023</td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm btn-link" type="button" data-bs-toggle="dropdown">
                                                                <i class="fa fa-ellipsis-v"></i>
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-menu-end">
                                                                <li><a class="dropdown-item" href="#"><i class="fa fa-eye me-2"></i>View</a></li>
                                                                <li><a class="dropdown-item" href="#"><i class="fa fa-edit me-2"></i>Edit</a></li>
                                                                <li><a class="dropdown-item text-danger" href="#"><i class="fa fa-ban me-2"></i>Suspend</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <img src="https://source.unsplash.com/random/40x40/?man" class="rounded-circle me-2" width="40" height="40" alt="User">
                                                            <div>
                                                                <div class="fw-bold">Robert Johnson</div>
                                                                <div class="small text-muted">robertj</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>robert.j@example.com</td>
                                                    <td><span class="badge bg-secondary">User</span></td>
                                                    <td><span class="badge bg-warning">Pending</span></td>
                                                    <td>Jun 10, 2023</td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm btn-link" type="button" data-bs-toggle="dropdown">
                                                                <i class="fa fa-ellipsis-v"></i>
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-menu-end">
                                                                <li><a class="dropdown-item" href="#"><i class="fa fa-eye me-2"></i>View</a></li>
                                                                <li><a class="dropdown-item" href="#"><i class="fa fa-edit me-2"></i>Edit</a></li>
                                                                <li><a class="dropdown-item text-success" href="#"><i class="fa fa-check me-2"></i>Approve</a></li>
                                                                <li><a class="dropdown-item text-danger" href="#"><i class="fa fa-times me-2"></i>Reject</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <img src="https://source.unsplash.com/random/40x40/?girl" class="rounded-circle me-2" width="40" height="40" alt="User">
                                                            <div>
                                                                <div class="fw-bold">Emily Davis</div>
                                                                <div class="small text-muted">emilyd</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>emily.davis@example.com</td>
                                                    <td><span class="badge bg-secondary">User</span></td>
                                                    <td><span class="badge bg-success">Active</span></td>
                                                    <td>Jun 8, 2023</td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm btn-link" type="button" data-bs-toggle="dropdown">
                                                                <i class="fa fa-ellipsis-v"></i>
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-menu-end">
                                                                <li><a class="dropdown-item" href="#"><i class="fa fa-eye me-2"></i>View</a></li>
                                                                <li><a class="dropdown-item" href="#"><i class="fa fa-edit me-2"></i>Edit</a></li>
                                                                <li><a class="dropdown-item text-danger" href="#"><i class="fa fa-ban me-2"></i>Suspend</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <img src="https://source.unsplash.com/random/40x40/?boy" class="rounded-circle me-2" width="40" height="40" alt="User">
                                                            <div>
                                                                <div class="fw-bold">Michael Wilson</div>
                                                                <div class="small text-muted">michaelw</div>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>michael.w@example.com</td>
                                                    <td><span class="badge bg-secondary">User</span></td>
                                                    <td><span class="badge bg-danger">Suspended</span></td>
                                                    <td>Jun 5, 2023</td>
                                                    <td>
                                                        <div class="dropdown">
                                                            <button class="btn btn-sm btn-link" type="button" data-bs-toggle="dropdown">
                                                                <i class="fa fa-ellipsis-v"></i>
                                                            </button>
                                                            <ul class="dropdown-menu dropdown-menu-end">
                                                                <li><a class="dropdown-item" href="#"><i class="fa fa-eye me-2"></i>View</a></li>
                                                                <li><a class="dropdown-item" href="#"><i class="fa fa-edit me-2"></i>Edit</a></li>
                                                                <li><a class="dropdown-item text-success" href="#"><i class="fa fa-check-circle me-2"></i>Reactivate</a></li>
                                                            </ul>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
          // Toggle sidebar on mobile
          const sidebarToggle = document.getElementById('sidebarToggle');
          const mobileToggle = document.getElementById('mobileToggle');
          const adminLayout = document.querySelector('.admin-layout');

          function toggleSidebar() {
            adminLayout.classList.toggle('sidebar-collapsed');
          }

          if (sidebarToggle) {
            sidebarToggle.addEventListener('click', toggleSidebar);
          }

          if (mobileToggle) {
            mobileToggle.addEventListener('click', toggleSidebar);
          }

          // User Registration Chart
          const ctx = document.getElementById('userRegistrationChart');
          if (ctx) {
            new Chart(ctx, {
              type: 'doughnut',
              data: {
                labels: ['Regular Users', 'Organization Admins', 'Moderators', 'Administrators'],
                datasets: [{
                  data: [65, 20, 10, 5],
                  backgroundColor: [
                    '#4e54c8',
                    '#8f94fb',
                    '#ff7e5f',
                    '#feb47b'
                  ],
                  borderWidth: 0
                }]
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                  legend: {
                    position: 'bottom',
                    labels: {
                      boxWidth: 12,
                      padding: 15
                    }
                  }
                },
                cutout: '70%'
              }
            });
          }
        });
    </script>
</main>